(this["webpackJsonpjogo-da-velha"]=this["webpackJsonpjogo-da-velha"]||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){},42:function(e,n,t){},49:function(e,n,t){},55:function(e,n,t){},56:function(e,n,t){},57:function(e,n,t){},76:function(e,n,t){},77:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t.n(c),r=t(29),o=t.n(r),s=(t(37),t(38),t(12)),i=t(2),u=t(4),l=t.n(u),j=t(9),d=t(10),b=(t(40),t(1));function p(e){var n=e.children;return Object(b.jsxs)("div",{className:"background-container",children:[Object(b.jsx)("div",{className:"background"}),Object(b.jsx)("h1",{className:"game-name",children:"Jogo da Velha"}),Object(b.jsx)("div",{className:"container",children:n&&n})]})}t(42);function f(e){var n=e.boardState,t=e.onClickSquare,c=function(e,t){return n?n[e][t]:""};return Object(b.jsx)("div",{className:"board-container",children:null===n||void 0===n?void 0:n.map((function(e,a){return Object(b.jsx)("div",{className:"board-row",children:e.map((function(e,r){return Object(b.jsx)("div",{onClick:function(){return t(a,r)},className:"board-square",children:Object(b.jsx)("p",{className:c(a,r),children:(o=a,s=r,!!n&&!!n[o][s]&&c(a,r))})},r);var o,s}))},a)}))})}var O,h="https://ffea6cf4a8ca.ngrok.io/",m=t(30),x=t.n(m),v={connect:function(){console.log("::: WS CONNECTING :::");var e=h.replace("http","ws");return O=x.a.client("".concat(e,"/ws")),new Promise((function(e,n){O.connect({},(function(){console.log("::: WS CONNECTED :::"),e()}),(function(){console.log("::: WS CONNECTION ERROR :::"),n()}))}))},disconnect:function(){return new Promise((function(e,n){try{O.disconnect(e)}catch(t){n()}}))},isConnected:function(){return O.connected},subscribeToTopic:function(e,n){console.log("::: WS SUBSCRIBE TO TOPIC ".concat(e," :::")),O.subscribe(e,n)},unsubscribeToTopic:function(e){console.log("::: WS UNSUBSCRIBE TO TOPIC ".concat(e," :::")),O.unsubscribe(e)},sendMessage:function(e,n){console.log("::: WS SEND MESSAGE ".concat(n," :::")),O.send(e,{},JSON.stringify(n))}};t(49);function g(){var e=Object(i.g)().state,n=e.code,t=e.playerName,a=e.action,r=Object(c.useState)(),o=Object(d.a)(r,2),s=o[0],u=o[1],O=Object(c.useState)(void 0),h=Object(d.a)(O,2),m=h[0],x=h[1];Object(c.useEffect)((function(){return function(){var e=Object(j.a)(l.a.mark((function e(n,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.connect();case 2:v.subscribeToTopic("/room/".concat(n),g),v.subscribeToTopic("/game/".concat(n),N),v.sendMessage("/app/room/".concat(n),{action:a,playerName:t});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()(n,t),function(){v.sendMessage("/app/room/".concat(n),{action:"LEAVE",playerName:t}),v.disconnect()}}),[n,t]);var g=function(e){console.log("Room message:",e)},N=function(e){var n=JSON.parse(e.body);x(n.turn),C(n.board)},C=function(e){var n=e.map((function(e){return e.map((function(e){return e===t?"CREATE"===a?"X":"O":""!==e?"CREATE"===a?"O":"X":""}))}));u(n)};return Object(b.jsx)(p,{children:Object(b.jsxs)("div",{className:"game-container",children:[Object(b.jsx)(f,{onClickSquare:function(e,c){return function(e,c){v.sendMessage("/app/game/".concat(n),{action:"MOVE",playerName:t,x:e,y:c})}(e,c)},boardState:s}),Object(b.jsxs)("div",{className:"game-info",children:[Object(b.jsxs)("p",{className:"room-name",children:["SALA: #",n]}),Object(b.jsxs)("p",{className:"player-turn",children:["Vez de ",Object(b.jsx)("span",{className:m===t?"CREATE"===a?"player-x":"player-o":"CREATE"===a?"player-o":"player-x",children:m})]})]})]})})}t(55);var N=t.p+"static/media/user.ef8063a8.svg";t(56);function C(e){var n=e.onChange,t=void 0===n?function(){}:n;return Object(b.jsx)("input",{onChange:function(e){t(e.target.value)},className:"input-name",placeholder:"Digite seu nick...",type:"text",maxLength:20,minLength:1})}t(57);function S(e){e.type;var n=e.children,t=e.disabled,c=e.onClick;return Object(b.jsx)("button",{onClick:c,className:"button-container ".concat(t&&"disabled"),children:Object(b.jsx)("p",{className:"button-label",children:n})})}var E=t(18),y=t(32),T=t.n(y).a.create();T.interceptors.request.use(function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(E.a)(Object(E.a)({},n),{},{baseURL:h,timeout:6e4,headers:{}}),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());var k={get:function(e,n){return T.get("".concat(e),{params:n})},post:function(e,n){return T.post("".concat(e),n)},patch:function(e,n){return T.patch("".concat(e),n)},put:function(e,n){return T.put("".concat(e),n)},delete:function(e,n){return T.delete("".concat(e),n)}},A={createRoom:function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/api/code");case 2:return e.abrupt("return",e.sent.data.code);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function R(){var e=Object(i.f)(),n=Object(c.useState)(""),t=Object(d.a)(n,2),a=t[0],r=t[1],o=function(){var n=Object(j.a)(l.a.mark((function n(){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.createRoom();case 3:t=n.sent,e.push({pathname:"/jogo",state:{action:"CREATE",code:t,playerName:a}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return Object(b.jsx)(p,{children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("img",{src:N,alt:"Usu\xe1rio"}),Object(b.jsx)(C,{onChange:function(e){return r(e)}}),Object(b.jsx)(S,{onClick:o,children:"CRIAR SALA"})]})})}t(76);function w(){var e=Object(i.f)(),n=Object(i.h)().code,t=Object(c.useState)(""),a=Object(d.a)(t,2),r=a[0],o=a[1],s=function(){var t=Object(j.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=parseInt(n,10),e.push({pathname:"/jogo",state:{action:"JOIN",code:c,playerName:r}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(b.jsx)(p,{children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("img",{src:N,alt:"Usu\xe1rio"}),Object(b.jsxs)("p",{className:"join-room-name",children:["SALA: #",n]}),Object(b.jsx)(C,{onChange:function(e){return o(e)}}),Object(b.jsx)(S,{onClick:s,children:"ENTRAR NA SALA"})]})})}function I(){return Object(b.jsx)(s.a,{children:Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",children:Object(b.jsx)(R,{})}),Object(b.jsx)(i.a,{exact:!0,path:"/sala/:code",children:Object(b.jsx)(w,{})}),Object(b.jsx)(i.a,{exact:!0,path:"/jogo",children:Object(b.jsx)(g,{})})]})})}var L=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(I,{})})},M=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,78)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(L,{})}),document.getElementById("root")),M()}},[[77,1,2]]]);
//# sourceMappingURL=main.6d4a60e9.chunk.js.map