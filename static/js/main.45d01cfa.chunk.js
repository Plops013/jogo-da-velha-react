(this["webpackJsonpjogo-da-velha"]=this["webpackJsonpjogo-da-velha"]||[]).push([[0],{36:function(e,n,t){},37:function(e,n,t){},39:function(e,n,t){},41:function(e,n,t){},48:function(e,n,t){},57:function(e,n,t){},58:function(e,n,t){},59:function(e,n,t){},60:function(e,n,t){},79:function(e,n,t){},80:function(e,n,t){},81:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(28),o=t.n(r),s=(t(36),t(37),t(12)),i=t(2),u=t(4),l=t.n(u),j=t(9),d=t(10),p=(t(39),t(0));function b(e){var n=e.children;return Object(p.jsxs)("div",{className:"background-container",children:[Object(p.jsx)("div",{className:"background"}),Object(p.jsx)("h1",{className:"game-name",children:"Jogo da Velha"}),Object(p.jsx)("div",{className:"container",children:n&&n})]})}t(41);function f(e){var n=e.boardState,t=e.onClickSquare,c=function(e,t){return n?n[e][t]:""};return Object(p.jsx)("div",{className:"board-container",children:null===n||void 0===n?void 0:n.map((function(e,a){return Object(p.jsx)("div",{className:"board-row",children:e.map((function(e,r){return Object(p.jsx)("div",{onClick:function(){return t(a,r)},className:"board-square",children:Object(p.jsx)("p",{className:c(a,r),children:(o=a,s=r,!!n&&!!n[o][s]&&c(a,r))})},r);var o,s}))},a)}))})}var O,m="https://ffea6cf4a8ca.ngrok.io/",h=t(29),x=t.n(h),g={connect:function(){console.log("::: WS CONNECTING :::");var e=m.replace("http","ws");return O=x.a.client("".concat(e,"/ws")),new Promise((function(e,n){O.connect({},(function(){console.log("::: WS CONNECTED :::"),e()}),(function(){console.log("::: WS CONNECTION ERROR :::"),n()}))}))},disconnect:function(){return new Promise((function(e,n){try{O.disconnect(e)}catch(t){n()}}))},isConnected:function(){return O.connected},subscribeToTopic:function(e,n){console.log("::: WS SUBSCRIBE TO TOPIC ".concat(e," :::")),O.subscribe(e,n)},unsubscribeToTopic:function(e){console.log("::: WS UNSUBSCRIBE TO TOPIC ".concat(e," :::")),O.unsubscribe(e)},sendMessage:function(e,n){console.log("::: WS SEND MESSAGE ".concat(n," :::")),O.send(e,{},JSON.stringify(n))}};t(48);function v(){var e=Object(i.h)().state,n=Object(i.g)(),t=Object(c.useState)(),a=Object(d.a)(t,2),r=a[0],o=a[1],s=Object(c.useState)(),u=Object(d.a)(s,2),O=u[0],m=u[1],h=Object(c.useState)(void 0),x=Object(d.a)(h,2),v=x[0],N=x[1];Object(c.useEffect)((function(){if(e){var t=e,c=t.code,a=t.playerName,r=t.action;return m({code:c,playerName:a,action:r}),C(c,a,r),function(){S(c,a)}}n.push("/")}),[e]);var C=function(){var e=Object(j.a)(l.a.mark((function e(n,t,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.connect();case 2:g.subscribeToTopic("/room/".concat(n),y),g.subscribeToTopic("/game/".concat(n),E),g.sendMessage("/app/room/".concat(n),{action:c,playerName:t});case 5:case"end":return e.stop()}}),e)})));return function(n,t,c){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(l.a.mark((function e(n,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.sendMessage("/app/room/".concat(n),{action:"LEAVE",playerName:t}),g.disconnect();case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(e){console.log("Room message:",e)},E=function(e){var n=JSON.parse(e.body);N(n.turn),T(n.board)},T=function(e){if(O){var n=e.map((function(e){return e.map((function(e){return e===O.playerName?"CREATE"===O.action?"X":"O":""!==e?"CREATE"===O.action?"O":"X":""}))}));o(n)}};return Object(p.jsx)(b,{children:Object(p.jsxs)("div",{className:"game-container",children:[Object(p.jsx)(f,{onClickSquare:function(e,n){return function(e,n){O&&g.sendMessage("/app/game/".concat(O.code),{action:"MOVE",playerName:O.playerName,x:e,y:n})}(e,n)},boardState:r}),Object(p.jsxs)("div",{className:"game-info",children:[Object(p.jsxs)("p",{className:"room-name",children:["SALA: #",!!O&&O.code]}),Object(p.jsxs)("p",{className:"player-turn",children:["Vez de ",Object(p.jsx)("span",{className:function(){if(O)return v===O.playerName?"CREATE"===O.action?"player-x":"player-o":"CREATE"===O.action?"player-o":"player-x"}(),children:v})]})]})]})})}t(57);var N=t.p+"static/media/user.ef8063a8.svg";t(58);function C(e){var n=e.onChange,t=void 0===n?function(){}:n;return Object(p.jsx)("input",{onChange:function(e){t(e.target.value)},className:"input-name",placeholder:"Digite seu nick...",type:"text",maxLength:20,minLength:1})}t(59);function S(){return Object(p.jsx)("section",{className:"talign-center",children:Object(p.jsx)("div",{className:"spinner icon-spinner-2","aria-hidden":"true"})})}t(60);function y(e){e.type;var n=e.children,t=e.disabled,c=e.loading,a=e.onClick;return Object(p.jsxs)("button",{disabled:t||c,onClick:a,className:"button-container ".concat((!!t||!!c)&&"disabled"),children:[!!c&&Object(p.jsx)("div",{className:"spinner-container",children:Object(p.jsx)(S,{})}),Object(p.jsx)("p",{className:"button-label",children:n})]})}var E=t(18),T=t(31),k=t.n(T).a.create();k.interceptors.request.use(function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(E.a)(Object(E.a)({},n),{},{baseURL:m,timeout:6e4,headers:{}}),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());var w={get:function(e,n){return k.get("".concat(e),{params:n})},post:function(e,n){return k.post("".concat(e),n)},patch:function(e,n){return k.patch("".concat(e),n)},put:function(e,n){return k.put("".concat(e),n)},delete:function(e,n){return k.delete("".concat(e),n)}},A={createRoom:function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/api/code");case 2:return e.abrupt("return",e.sent.data.code);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function R(){var e=Object(i.g)(),n=Object(c.useState)(!1),t=Object(d.a)(n,2),a=t[0],r=t[1],o=Object(c.useState)(""),s=Object(d.a)(o,2),u=s[0],f=s[1],O=function(){var n=Object(j.a)(l.a.mark((function n(){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(!0),n.next=4,A.createRoom();case 4:t=n.sent,r(!1),e.push({pathname:"/jogo",state:{action:"CREATE",code:t,playerName:u}}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r(!1),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return Object(p.jsx)(b,{children:Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("img",{className:"",src:N,alt:"Usu\xe1rio"}),Object(p.jsx)(C,{onChange:function(e){return f(e)}}),Object(p.jsx)(y,{loading:a,onClick:O,children:"CRIAR SALA"})]})})}t(79);function I(){var e=Object(i.g)(),n=Object(i.i)().code,t=Object(c.useState)(""),a=Object(d.a)(t,2),r=a[0],o=a[1],s=function(){var t=Object(j.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=parseInt(n,10),e.push({pathname:"/jogo",state:{action:"JOIN",code:c,playerName:r}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p.jsx)(b,{children:Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("img",{src:N,alt:"Usu\xe1rio"}),Object(p.jsxs)("p",{className:"join-room-name",children:["SALA: #",n]}),Object(p.jsx)(C,{onChange:function(e){return o(e)}}),Object(p.jsx)(y,{onClick:s,children:"ENTRAR NA SALA"})]})})}var L=t.p+"static/media/404-not-found.e0ea9ddc.svg";t(80);function M(){return Object(p.jsx)(b,{children:Object(p.jsxs)("div",{className:"not-found-container",children:[Object(p.jsx)("img",{className:"not-found-image",src:L,alt:"Usu\xe1rio"}),Object(p.jsx)("p",{className:"not-found-message",children:"Opa! N\xe3o conseguimos encontar essa pagina por aqui"})]})})}function U(){return Object(p.jsx)(s.a,{basename:"/jogo-da-velha-react",children:Object(p.jsxs)(i.d,{children:[Object(p.jsx)(i.b,{exact:!0,path:"/",component:R}),Object(p.jsx)(i.b,{exact:!0,path:"/sala/:code",component:I}),Object(p.jsx)(i.b,{exact:!0,path:"/jogo",component:v}),Object(p.jsx)(i.b,{path:"/404",component:M}),Object(p.jsx)(i.a,{to:"/404"})]})})}var B=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(U,{})})},J=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,82)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(B,{})}),document.getElementById("root")),J()}},[[81,1,2]]]);
//# sourceMappingURL=main.45d01cfa.chunk.js.map