(this["webpackJsonpjogo-da-velha"]=this["webpackJsonpjogo-da-velha"]||[]).push([[0],{36:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){},42:function(e,n,t){},49:function(e,n,t){},58:function(e,n,t){},59:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){},80:function(e,n,t){},81:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(28),o=t.n(r),s=(t(36),t(37),t(12)),i=t(2),u=(t(38),t(0));function l(e){var n=e.children;return Object(u.jsxs)("div",{className:"background-container",children:[Object(u.jsx)("div",{className:"background"}),Object(u.jsx)("h1",{className:"game-name",children:"Jogo da Velha"}),Object(u.jsx)("div",{className:"container",children:n&&n})]})}var j=t.p+"static/media/404-not-found.e0ea9ddc.svg";t(40);function d(){return Object(u.jsx)(l,{children:Object(u.jsxs)("div",{className:"not-found-container",children:[Object(u.jsx)("img",{className:"not-found-image",src:j,alt:"Usu\xe1rio"}),Object(u.jsx)("p",{className:"not-found-message",children:"Opa! N\xe3o conseguimos encontar essa pagina por aqui :("})]})})}var p=t(4),b=t.n(p),f=t(9),O=t(10);t(42);function m(e){var n=e.boardState,t=e.onClickSquare,c=function(e,t){return n?n[e][t]:""};return Object(u.jsx)("div",{className:"board-container",children:null===n||void 0===n?void 0:n.map((function(e,a){return Object(u.jsx)("div",{className:"board-row",children:e.map((function(e,r){return Object(u.jsx)("div",{onClick:function(){return t(a,r)},className:"board-square",children:Object(u.jsx)("p",{className:c(a,r),children:(o=a,s=r,!!n&&!!n[o][s]&&c(a,r))})},r);var o,s}))},a)}))})}var h,x="https://ffea6cf4a8ca.ngrok.io/",v=t(29),g=t.n(v),N={connect:function(){console.log("::: WS CONNECTING :::");var e=x.replace("http","ws");return h=g.a.client("".concat(e,"/ws")),new Promise((function(e,n){h.connect({},(function(){console.log("::: WS CONNECTED :::"),e()}),(function(){console.log("::: WS CONNECTION ERROR :::"),n()}))}))},disconnect:function(){return new Promise((function(e,n){try{h.disconnect(e)}catch(t){n()}}))},isConnected:function(){return h.connected},subscribeToTopic:function(e,n){console.log("::: WS SUBSCRIBE TO TOPIC ".concat(e," :::")),h.subscribe(e,n)},unsubscribeToTopic:function(e){console.log("::: WS UNSUBSCRIBE TO TOPIC ".concat(e," :::")),h.unsubscribe(e)},sendMessage:function(e,n){console.log("::: WS SEND MESSAGE ".concat(n," :::")),h.send(e,{},JSON.stringify(n))}};t(49);function C(){var e=Object(i.h)().state,n=Object(i.g)(),t=Object(c.useState)(),a=Object(O.a)(t,2),r=a[0],o=a[1],s=Object(c.useState)(),j=Object(O.a)(s,2),d=j[0],p=j[1],h=Object(c.useState)(void 0),x=Object(O.a)(h,2),v=x[0],g=x[1];Object(c.useEffect)((function(){if(e){var t=e,c=t.code,a=t.playerName,r=t.action;return p({code:c,playerName:a,action:r}),C(c,a,r),function(){S(c,a)}}n.push("/")}),[e]);var C=function(){var e=Object(f.a)(b.a.mark((function e(n,t,c){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.connect();case 2:N.subscribeToTopic("/room/".concat(n),y),N.subscribeToTopic("/game/".concat(n),E),N.sendMessage("/app/room/".concat(n),{action:c,playerName:t});case 5:case"end":return e.stop()}}),e)})));return function(n,t,c){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(b.a.mark((function e(n,t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.sendMessage("/app/room/".concat(n),{action:"LEAVE",playerName:t}),N.disconnect();case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(e){console.log("Room message:",e)},E=function(e){var n=JSON.parse(e.body);g(n.turn),T(n.board)},T=function(e){if(d){var n=e.map((function(e){return e.map((function(e){return e===d.playerName?"CREATE"===d.action?"X":"O":""!==e?"CREATE"===d.action?"O":"X":""}))}));o(n)}};return Object(u.jsx)(l,{children:Object(u.jsxs)("div",{className:"game-container",children:[Object(u.jsx)(m,{onClickSquare:function(e,n){return function(e,n){d&&N.sendMessage("/app/game/".concat(d.code),{action:"MOVE",playerName:d.playerName,x:e,y:n})}(e,n)},boardState:r}),Object(u.jsxs)("div",{className:"game-info",children:[Object(u.jsxs)("p",{className:"room-name",children:["SALA: #",!!d&&d.code]}),Object(u.jsxs)("p",{className:"player-turn",children:["Vez de ",Object(u.jsx)("span",{className:function(){if(d)return v===d.playerName?"CREATE"===d.action?"player-x":"player-o":"CREATE"===d.action?"player-o":"player-x"}(),children:v})]})]})]})})}t(58);var S=t.p+"static/media/user.ef8063a8.svg";t(59);function y(e){var n=e.onChange,t=void 0===n?function(){}:n;return Object(u.jsx)("input",{onChange:function(e){t(e.target.value)},className:"input-name",placeholder:"Digite seu nick...",type:"text",maxLength:20,minLength:1})}t(60);function E(){return Object(u.jsx)("section",{className:"talign-center",children:Object(u.jsx)("div",{className:"spinner icon-spinner-2","aria-hidden":"true"})})}t(61);function T(e){e.type;var n=e.children,t=e.disabled,c=e.loading,a=e.onClick;return Object(u.jsxs)("button",{disabled:t||c,onClick:a,className:"button-container ".concat((!!t||!!c)&&"disabled"),children:[!!c&&Object(u.jsx)("div",{className:"spinner-container",children:Object(u.jsx)(E,{})}),Object(u.jsx)("p",{className:"button-label",children:n})]})}var k=t(18),w=t(31),A=t.n(w).a.create();A.interceptors.request.use(function(){var e=Object(f.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.a)(Object(k.a)({},n),{},{baseURL:x,timeout:6e4,headers:{}}),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());var R={get:function(e,n){return A.get("".concat(e),{params:n})},post:function(e,n){return A.post("".concat(e),n)},patch:function(e,n){return A.patch("".concat(e),n)},put:function(e,n){return A.put("".concat(e),n)},delete:function(e,n){return A.delete("".concat(e),n)}},I={createRoom:function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/api/code");case 2:return e.abrupt("return",e.sent.data.code);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function L(){var e=Object(i.g)(),n=Object(c.useState)(!1),t=Object(O.a)(n,2),a=t[0],r=t[1],o=Object(c.useState)(""),s=Object(O.a)(o,2),j=s[0],d=s[1],p=function(){var n=Object(f.a)(b.a.mark((function n(){var t;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(!0),n.next=4,I.createRoom();case 4:t=n.sent,r(!1),e.push({pathname:"/jogo",state:{action:"CREATE",code:t,playerName:j}}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r(!1),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return Object(u.jsx)(l,{children:Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("img",{className:"",src:S,alt:"Usu\xe1rio"}),Object(u.jsx)(y,{onChange:function(e){return d(e)}}),Object(u.jsx)(T,{loading:a,onClick:p,children:"CRIAR SALA"})]})})}t(80);function M(){var e=Object(i.g)(),n=Object(i.i)().code,t=Object(c.useState)(""),a=Object(O.a)(t,2),r=a[0],o=a[1],s=function(){var t=Object(f.a)(b.a.mark((function t(){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=parseInt(n,10),e.push({pathname:"/jogo",state:{action:"JOIN",code:c,playerName:r}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsx)(l,{children:Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("img",{src:S,alt:"Usu\xe1rio"}),Object(u.jsxs)("p",{className:"join-room-name",children:["SALA: #",n]}),Object(u.jsx)(y,{onChange:function(e){return o(e)}}),Object(u.jsx)(T,{onClick:s,children:"ENTRAR NA SALA"})]})})}function U(){return Object(u.jsx)(s.a,{basename:"/jogo-da-velha-react",children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{exact:!0,path:"/",component:L}),Object(u.jsx)(i.b,{exact:!0,path:"/sala/:code",component:M}),Object(u.jsx)(i.b,{exact:!0,path:"/jogo",component:C}),Object(u.jsx)(i.b,{path:"/404",component:d}),Object(u.jsx)(i.a,{to:"/404"})]})})}var B=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(U,{})})},J=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,82)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(B,{})}),document.getElementById("root")),J()}},[[81,1,2]]]);
//# sourceMappingURL=main.b0cc59cf.chunk.js.map